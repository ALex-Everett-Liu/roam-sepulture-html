<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategy Game - Canvas Version</title>
    <link rel="stylesheet" href="strategy_styles.css">
</head>
<body>
    <div class="game-container">
        <header>
            <h1>Strategy Game</h1>
            <div class="time-display">
                <span>current time: </span>
                <span id="current-time">1000-01-01 AD</span>
            </div>
        </header>

        <div class="main-content">
            <div class="canvas-container">
                <canvas id="game-canvas" width="800" height="600"></canvas>
                <div class="canvas-controls">
                    <div class="zoom-controls">
                        <button id="zoom-in">🔍+</button>
                        <span id="zoom-level">100%</span>
                        <button id="zoom-out">🔍-</button>
                        <button id="reset-view">Reset View</button>
                    </div>
                </div>
                <div class="canvas-info">
                    <span id="mouse-pos">mouse position: (0, 0)</span>
                    <span> scroll to zoom | drag to pan </span>
                </div>
            </div>

            <div class="control-panel">
                <div class="section">
                    <h3>Game Control</h3>
                    <button id="save-game">save game</button>
                    <button id="load-game">load game</button>
                    <button id="advance-time">advance time</button>
                    <input type="file" id="file-input" accept=".json" style="display: none;">
                </div>

                <div class="section">
                    <h3>游戏状态</h3>
                    <div class="stats">
                        <div>据点总数: <span id="total-points">0</span></div>
                        <div>城镇: <span id="town-count">0</span></div>
                        <div>军事单位: <span id="unit-count">0</span></div>
                    </div>
                </div>

                <div class="section">
                    <h3>操作说明</h3>
                    <ul>
                        <li>点击空白处创建新据点</li>
                        <li>点击据点编辑属性</li>
                        <li>推进时间保存历史记录</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 创建据点弹窗 -->
    <div id="create-modal" class="modal">
        <div class="modal-content">
            <h3>create new base</h3>
            <p>position: <span id="pos-display"></span></p>
            <div class="button-group">
                <button id="create-town" class="btn-town">create town</button>
                <button id="create-unit" class="btn-unit">create military unit</button>
                <button id="cancel-create" class="btn-cancel">cancel</button>
            </div>
        </div>
    </div>

    <!-- 编辑据点弹窗 -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <h3>编辑据点属性</h3>
            <form id="edit-form">
                <div class="form-group">
                    <label>名称:</label>
                    <input type="text" id="edit-name" required>
                </div>
                <div class="form-group">
                    <label>类型:</label>
                    <span id="edit-type"></span>
                </div>
                <div class="form-group">
                    <label>位置:</label>
                    <span id="edit-position"></span>
                </div>
                <div class="form-group">
                    <label>阵营颜色:</label>
                    <input type="color" id="edit-color" value="#ff0000">
                </div>
                <div class="form-group">
                    <label>总人口:</label>
                    <input type="number" id="edit-population" min="0" value="100">
                </div>
                <div class="form-group">
                    <label>战兵人数:</label>
                    <input type="number" id="edit-soldiers" min="0" value="20">
                </div>
                <div class="form-group">
                    <label>粮草:</label>
                    <input type="number" id="edit-food" min="0" value="1000">
                </div>
                <div class="form-group">
                    <label>金钱:</label>
                    <input type="number" id="edit-money" min="0" value="500">
                </div>
                <div class="form-actions">
                    <button type="submit">保存</button>
                    <button type="button" id="delete-point">删除</button>
                    <button type="button" id="cancel-edit">取消</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 时间推进弹窗 -->
    <div id="time-modal" class="modal">
        <div class="modal-content">
            <h3>推进时间</h3>
            <p>当前时间: <span id="current-time-display"></span></p>
            <div class="form-group">
                <label>新时间:</label>
                <input type="date" id="new-date">
            </div>
            <div class="form-actions">
                <button id="confirm-time">确认</button>
                <button id="cancel-time">取消</button>
            </div>
        </div>
    </div>

    <script src="strategy_game.js"></script>
</body>
</html>