<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code精准上下文对比</title>
    
    <!-- TailwindCSS 3.0+ via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome 6.4.0+ -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #1e293b;
            --secondary-color: #475569;
            --accent-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
            --text-color: #1e293b;
            --border-color: #e2e8f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.7;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--card-bg);
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
        }

        .header {
            background: linear-gradient(135deg, #1e293b, #334155);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        .content {
            padding: 3rem 2rem;
        }

        .section {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }

        .section:last-child {
            border-bottom: none;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        h2 {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--primary-color);
            margin: 2rem 0 1rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-color);
        }

        h3 {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--secondary-color);
            margin: 1.5rem 0 1rem 0;
        }

        h4 {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--primary-color);
            margin: 1rem 0 0.5rem 0;
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        blockquote {
            border-left: 4px solid var(--accent-color);
            padding-left: 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: var(--secondary-color);
            background: #f8fafc;
            padding: 1rem 1.5rem;
            border-radius: 0 8px 8px 0;
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'JetBrains Mono', 'Consolas', 'Monaco', 'Lucida Console', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        code {
            background: #f1f5f9;
            color: #1e293b;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', 'Consolas', 'Monaco', 'Lucida Console', monospace;
            font-size: 0.9em;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
            border-radius: 0;
        }

        .highlight-box {
            background: #fef3c7;
            border-left: 4px solid var(--warning-color);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }

        .info-box {
            background: #dbeafe;
            border-left: 4px solid var(--accent-color);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .comparison-table th,
        .comparison-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-table th {
            background: var(--accent-color);
            color: white;
            font-weight: 600;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8fafc;
        }

        .user-message, .assistant-message {
            margin: 1.5rem 0;
            padding: 1.5rem;
            border-radius: 8px;
        }

        .user-message {
            background: #f3f4f6;
            border-left: 4px solid #9ca3af;
        }

        .assistant-message {
            background: #eff6ff;
            border-left: 4px solid var(--accent-color);
        }

        .role-header {
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .user-message .role-header {
            color: #4b5563;
        }

        .assistant-message .role-header {
            color: var(--accent-color);
        }

        .nav-breadcrumb {
            background: var(--card-bg);
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
        }

        .nav-breadcrumb a {
            color: var(--accent-color);
            text-decoration: none;
        }

        .nav-breadcrumb a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .container {
                margin: 0;
                box-shadow: none;
            }

            .header {
                padding: 2rem 1rem;
            }

            .content {
                padding: 2rem 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Claude Code精准上下文对比</h1>
            <p>深入对比 Cursor 的 @file 机制与 Claude Code 的上下文处理能力</p>
        </header>

        <nav class="nav-breadcrumb">
            <a href="../../index.html">首页</a> &gt; 
            <a href="../../programming.html">编程</a> &gt; 
            <span>Claude Code精准上下文对比</span>
        </nav>

        <main class="content">
            <div class="user-message">
                <div class="role-header">
                    <i class="fas fa-user"></i>
                    🧑‍💻 User
                </div>
                <p>i want to switch from Cursor to Claude Code. in Cursor, we can @example.js or even @example.js(line10-20) to provide precise context inside certain project to llm, now, i want to know how could we achieve this in Claude Code?</p>
            </div>

            <div class="assistant-message">
                <div class="role-header">
                    <i class="fas fa-robot"></i>
                    🤖 Assistant
                </div>
                <p>目前，Cursor 支持通过 <code>@example.js</code> 或 <code>@example.js(line10-20)</code> 这样在 prompt 里精准选取项目里的特定文件或行，从而为 LLM（如 GPT-4、Claude）提供精细上下文，这极大提升了代码 AI 交互的效率和针对性。那么，你想迁移到 Anthropic/Claude 新出的 Claude Code，有没有类似的上下文指定能力？我们来详细对比下：</p>
            </div>

            <section class="section">
                <h2>1. Cursor 的 <code>@file</code> 精准上下文机制</h2>
                <ul>
                    <li><strong>优点：</strong>在对话时通过 <code>@xxx.js</code>，甚至可以指定 <code>@xxx.js(10-20)</code>，极为便捷地给 LLM 精准上下文片段。</li>
                    <li><strong>支持：</strong>在同一 prompt 里引用多个文件或文件区段，这很方便沟通与大型 refactor/review 场景。</li>
                </ul>
            </section>

            <section class="section">
                <h2>2. Claude Code 的上下文引用机制</h2>
                <p>据目前公开资料，Claude Code（截至 2025 年 2 月 research preview）和 Cursor 的机制有一些区别：<a href="#ref-3">[3]</a></p>

                <h3>a) Claude Code 的核心定位和入口</h3>
                <ul>
                    <li>Claude Code 是 Anthropic 推出的工程 AI 代理，重点是"直接在 terminal 让 Claude 帮你解决工程任务"，而非一个 IDE 内联代码编辑器（如 Cursor），它目前以 CLI 工具/Agent 形式存在。<a href="#ref-3">[3]</a></li>
                </ul>

                <h3>b) Claude Code 的上下文获取方式</h3>
                <ol>
                    <li><strong>与项目文件的交互：</strong>
                        <ul>
                            <li>Claude Code 通过命令行交互，与"本地代码库"关联。</li>
                            <li>它通常要求你定位到项目根目录，Claude 会自动"感知"到代码结构，可以读取、修改和生成你项目里的文件。<a href="#ref-3">[3]</a></li>
                        </ul>
                    </li>
                    <li><strong>文件/行级别的引用能力：</strong>
                        <ul>
                            <li>目前<strong>官方没有像 Cursor 一样支持 <code>@file.js(line1-10)</code> 这种在 prompt 中局部 inline 精确引用某些文件行的机制</strong>。</li>
                            <li>但你可以用命令参数指定 Claude 关注或者操作的文件，例如 <code>claude edit src/example.js</code>，但这会整体提交该文件内容到 LLM 上下文，而无法在 prompt 粒度上自定义省略/精准行区间。</li>
                            <li>如有汇报改动等需求，Claude Code 可以呈现 diff，但不直接暴露在 prompt 级别选行的语法（参考 <a href="#ref-anthropic">[Anthropic 官网]</a>、业内评测与知乎、Twitter 等开发者使用分享）。</li>
                        </ul>
                    </li>
                    <li><strong>交互与上下文限制：</strong>
                        <ul>
                            <li>Claude Code 在上下文额上限较高（理论10万token），可以整体 ingest 比较大的项目或文件块，但会优先自动决定哪些代码或文件相关，并非交互型输入控件那样让用户精细控制文件/行。</li>
                            <li>如需引用特定文件某段落，通用做法仍是手动复制粘贴需要的代码片段到 prompt，对照说明片段来源或行号（比如 <code>// from example.js lines 10-20</code>），这种方式全自动化程度和交互性相比 Cursor 的 <code>@</code> 语法是较弱的。</li>
                        </ul>
                    </li>
                </ol>

                <p><strong>3. Interaction and Context Limitations:</strong></p>
                <ul>
                    <li>Claude Code has a relatively high context limit (theoretically 100K tokens), allowing it to ingest larger projects or file chunks as a whole. However, it automatically prioritizes which code or files are relevant, rather than offering fine-grained file/line control like interactive input widgets.</li>
                    <li>To reference specific sections of a file, the common practice is still to manually copy and paste the required code snippets into the prompt, along with annotations about their source or line numbers (e.g., <code>// from example.js lines 10-20</code>). This method is less automated and interactive compared to Cursor's <code>@</code> syntax.</li>
                </ul>
            </section>

            <section class="section">
                <h2>3. 总结对比与建议</h2>
                <ul>
                    <li><strong>如果你的开发工作流极度依赖 prompt 级别文件行片段引用（如 Cursor 的 <code>@file(lineX-Y)</code>），那目前 Claude Code 并不直接支持类似语法或插件。</strong></li>
                    <li>Claude Code 更适合大任务和全项目级别的上下文分析，由工具自动决定引用哪些重要代码区域。</li>
                    <li>如果要在 Claude Code 下精准让 LLM关注代码的某一段，你只能在 prompt 中直接粘贴那一段，并加上行号或文件路径说明。</li>
                </ul>
            </section>

            <section class="section">
                <h2>4. 参考/出处</h2>
                <ul>
                    <li>详细参考了 Codesubmit 2025 年最新盘点，明确写道：</li>
                </ul>
                <blockquote>
                    In addition, Claude Code is available as a limited research preview, and enables developers to delegate substantial engineering tasks to Claude directly from their terminal.<br>
                    ... Claude Code ... enables developers to delegate substantial engineering tasks to Claude directly from their terminal.
                    <br><br>
                    但它并没有提到支持类似 Cursor 那样 prompt 级指定精细文件行区段的语法，更多是以自动感知项目结构和文件为主。<a href="#ref-3">[3]</a>
                </blockquote>

                <div class="highlight-box">
                    <strong>结论：</strong><br>
                    Claude Code 目前主要通过自动读取项目文件（而不是 prompt 语法）来确定上下文。如果要像 Cursor 那样指定代码区段，你只能在 prompt 中直接粘贴代码片段，并注明行号或文件出处，尚无法用 <code>@xxx.js(10-20)</code> 这样的快捷语法。<a href="#ref-3">[3]</a>
                </div>

                <p><strong>如需进一步自动化，你可以关注 Claude Code 未来的 feature update 或参与社区讨论，推动官方支持 Cursor 式的精准上下文选择能力！</strong></p>
            </section>

            <section class="section">
                <div class="user-message">
                    <div class="role-header">
                        <i class="fas fa-user"></i>
                        🧑‍💻 User
                    </div>
                    <p>&gt; 如需引用特定文件某段落，通用做法仍是手动复制粘贴需要的代码片段到 prompt，对照说明片段来源或行号（比如 // from example.js lines 10-20）</p>
                    <p>这里的最佳实践是什么？比如让它给我解释某一行代码或某一个函数（包含几十到几百行代码）</p>
                    <p>please answer me in English</p>
                </div>
            </section>

            <section class="section">
                <div class="assistant-message">
                    <div class="role-header">
                        <i class="fas fa-robot"></i>
                        🤖 Assistant
                    </div>
                    <h3><strong>Best practices for getting Claude Code to explain a specific code line, block, or function</strong></h3>
                    <p>If you want Claude Code to explain a particular line of code or a whole function (which could span from dozens to hundreds of lines), here are the most effective and recommended approaches:</p>
                </div>

                <h3>1. <strong>Be Explicit: Give Both Context and Motivation</strong></h3>
                <ul>
                    <li><strong>Copy the exact code snippet</strong> (e.g., the lines or function you want explained) and paste it directly into your prompt.</li>
                    <li><strong>Add a clear instruction</strong>, such as "Please explain what the following function does, step by step," or "What happens on line 53 of this file?".</li>
                    <li><strong>If the code is long</strong> (hundreds of lines), try to provide only the relevant lines. State where this code is from, e.g., "from <code>example.js</code>, lines 10-120".</li>
                    <li>Explicit and direct prompts <em>always</em> yield better answers than vague ones, particularly for large code snippets or non-trivial functions. Explain why you want it explained if possible (e.g., "I'm new to this codebase, help me onboard")<a href="#ref-2">[2]</a><a href="#ref-1">[1]</a>.</li>
                </ul>

                <h3>2. <strong>Structure Your Prompt for Clarity</strong></h3>
                <ul>
                    <li>Use code blocks (triple backticks and language if appropriate) to format your code.</li>
                    <li>For large or complex functions, you can further structure your prompt with sections or XML tags to help Claude focus, e.g.:
                        <pre><code>&lt;function_to_explain&gt;
// ...your function code here...
&lt;/function_to_explain&gt;
&lt;question&gt;
Please explain the purpose of this function and how it works, step by step. Focus on variable flow and any tricky logic.
&lt;/question&gt;</code></pre>
                    </li>
                    <li>If you want a certain style (like step-by-step, pseudocode, or high-level summary), <em>say so</em> in your instructions<a href="#ref-2">[2]</a>.</li>
                </ul>

                <h3>3. <strong>Ground Claude's Response in the Source</strong></h3>
                <ul>
                    <li>You can instruct Claude:<br>
                        "Before answering, please quote the lines or code fragments most relevant to your explanation."</li>
                    <li>Optionally, add:<br>
                        "Summarize the main logic, and anchor your explanation in specific pieces of code as you go."</li>
                    <li>This technique, sometimes called "reference quoting," makes Claude's answer much more trustworthy and targeted, especially for long blocks<a href="#ref-2">[2]</a>.</li>
                </ul>

                <h3>4. <strong>Prompt Examples You Can Use</strong></h3>

                <h4>For a single line:</h4>
                <pre><code>Please explain the purpose of the following line in context. This is from `example.js` line 53:
```js
userData = await fetchUserData(userId);
```</code></pre>

                <h4>For a full function:</h4>
                <pre><code>Here is the function `getSortedUserList` from `users.ts` lines 41-122. Please explain what it does, line by line, and summarize any important design choices the author made.

```typescript
// ...function code...
```</code></pre>

                <h4>With a desired output format:</h4>
                <pre><code>&lt;instructions&gt;
You are an expert in TypeScript. For the following function, explain each part, list any potential bugs, and then summarize in a paragraph.
&lt;/instructions&gt;
&lt;function_code&gt;
// ...whole function here...
&lt;/function_code&gt;</code></pre>

                <h3>5. <strong>Use Project Memory (CLAUDE.md) If Applicable</strong></h3>
                <ul>
                    <li>If your workflow involves repeatedly referencing specific files or styles, or you want project-wide context to always be available, update <code>CLAUDE.md</code> with references to important patterns or files.</li>
                    <li>For highly-repeated patterns ("always use MUI components for new UIs"), add these as memory via the <code>#</code> shortcut or directly in <code>CLAUDE.md</code><a href="#ref-1">[1]</a><a href="#ref-2">[2]</a><a href="#ref-4">[4]</a>.</li>
                </ul>

                <h3>6. <strong>For Extremely Large Functions or Files</strong></h3>
                <ul>
                    <li>Claude 3.7 models can contextually handle large blocks (even thousands of lines)<a href="#ref-4">[4]</a>.</li>
                    <li>If you hit a context limit, split your request: "Here is part 1 of 3 of function <code>FooBar</code>, lines 10–110…" and so on.</li>
                    <li>You can also ask Claude to "analyze the structure and summarize what each logical segment is responsible for" if you just want a higher-level overview<a href="#ref-1">[1]</a><a href="#ref-4">[4]</a>.</li>
                </ul>

                <h3>7. <strong>General Tips</strong></h3>
                <ul>
                    <li>Use the <code>/clear</code> command to keep your session focused on the current question, especially in long sessions<a href="#ref-1">[1]</a><a href="#ref-4">[4]</a>.</li>
                    <li>For repeated explanations or reviews, consider creating a custom slash command that includes your preferred explanation template (e.g., stored in <code>.claude/commands/explain-function.md</code>)<a href="#ref-1">[1]</a><a href="#ref-4">[4]</a>.</li>
                    <li>Give feedback/corrections during the interaction: If the initial explanation misses a point, clarify or ask for more detail.</li>
                </ul>

                <h3>Summary Table</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Situation</th>
                            <th>Best Practice</th>
                            <th>Reference</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Explain a single line</td>
                            <td>Paste the line, reference source & context, ask directly</td>
                            <td><a href="#ref-2">[2]</a><a href="#ref-1">[1]</a></td>
                        </tr>
                        <tr>
                            <td>Explain a whole function</td>
                            <td>Paste function, state file & lines, specify output format (stepwise, summary, et cetera)</td>
                            <td><a href="#ref-2">[2]</a><a href="#ref-1">[1]</a><a href="#ref-4">[4]</a></td>
                        </tr>
                        <tr>
                            <td>Extra large code block</td>
                            <td>Split into parts if needed, reference file/lines, ask for summaries</td>
                            <td><a href="#ref-1">[1]</a><a href="#ref-2">[2]</a><a href="#ref-4">[4]</a></td>
                        </tr>
                        <tr>
                            <td>Repeatable needs</td>
                            <td>Store conventions or context in <code>CLAUDE.md</code>, custom slash commands</td>
                            <td><a href="#ref-1">[1]</a><a href="#ref-2">[2]</a><a href="#ref-4">[4]</a></td>
                        </tr>
                    </tbody>
                </table>

                <div class="info-box">
                    <strong>References:</strong><br>
                    <a href="#ref-1">[1]</a> <a href="https://www.anthropic.com/engineering/claude-code-best-practices" target="_blank">Anthropic Claude Code – Official Best Practices</a><br>
                    <a href="#ref-2">[2]</a> <a href="https://apidog.com/blog/claude-code-beginners-guide-best-practices/" target="_blank">ApiDog Claude Code Guide: Principles and Prompting</a><br>
                    <a href="#ref-4">[4]</a> <a href="https://www.builder.io/blog/claude-code" target="_blank">Builder.io – Power Workflow & Memory in Claude Code</a>
                </div>

                <div class="highlight-box">
                    <strong>In short:</strong><br>
                    <strong>Copy the relevant code to the prompt, label where it is from, and ask directly and specifically for the kind of explanation you want. Structure your prompt for clarity, and if required, use reference quoting or output format tags for higher quality results.</strong><a href="#ref-1">[1]</a><a href="#ref-2">[2]</a><a href="#ref-4">[4]</a>
                </div>

                <div class="info-box">
                    <strong>References:</strong><br>
                    <a href="#ref-1">[1]</a> <a href="https://www.anthropic.com/engineering/claude-code-best-practices" target="_blank">Claude Code Best Practices</a><br>
                    <a href="#ref-2">[2]</a> <a href="https://apidog.com/blog/claude-code-beginners-guide-best-practices/" target="_blank">Claude Code Beginners' Guide: Best Practices</a><br>
                    <a href="#ref-3">[3]</a> <a href="https://grantslatton.com/claude-code" target="_blank">Claude Code</a><br>
                    <a href="#ref-4">[4]</a> <a href="https://www.builder.io/blog/claude-code" target="_blank">How I use Claude Code (+ my best tips)</a>
                </div>
            </section>
        </main>
    </div>
</body>
</html>